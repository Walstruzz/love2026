<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æƒ…äººèŠ‚å¿«ä¹</title>
    <style>
        :root {
            --primary-color: #ffffff;
            --accent-color: #ffdae0;
            --glow-color: rgba(255, 182, 193, 0.8);
        }

        body {
            margin: 0;
            height: 100vh;
            overflow: hidden;
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #000;
        }

        /* èƒŒæ™¯å±‚çº§ */
        .gradient-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(125deg, #1a2a6c, #b21f1f, #fdbb2d);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            z-index: 1;
        }

        .image-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            background: url('bg.jpg') center/cover no-repeat;
            opacity: 0.35;
            z-index: 2;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #heart-container {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 3;
            overflow: hidden;
        }

        .player-card {
            position: relative;
            z-index: 10;
            width: 85%;
            max-width: 400px;
            padding: 30px 20px;
            border-radius: 35px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            text-align: center;
            color: var(--primary-color);
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
        }

        /* --- ç²¾ç¾ä¸‹æ‹‰èœå•æ ·å¼ --- */
        .playlist-container {
            margin-top: 25px;
            position: relative;
            width: 100%;
        }

        #songSelect {
            width: 100%;
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            color: white;
            font-size: 14px;
            appearance: none; /* å»æ‰åŸç”Ÿç®­å¤´ */
            -webkit-appearance: none;
            cursor: pointer;
            outline: none;
            transition: 0.3s;
            text-align: center;
        }

        #songSelect:focus {
            background: rgba(255, 255, 255, 0.25);
            border-color: var(--accent-color);
            box-shadow: 0 0 15px var(--glow-color);
        }

        /* ä¸‹æ‹‰èœå•é¡¹çš„èƒŒæ™¯ï¼ˆæ³¨ï¼šéƒ¨åˆ†æ‰‹æœºç³»ç»Ÿæµè§ˆå™¨ä¼šæ˜¾ç¤ºç³»ç»Ÿé»˜è®¤æ ·å¼ï¼‰ */
        #songSelect option {
            background: #333;
            color: white;
        }

        /* è‡ªå®šä¹‰ä¸‹æ‹‰ç®­å¤´ */
        .playlist-container::after {
            content: 'â–¼';
            font-size: 10px;
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            opacity: 0.7;
        }

        .lyric-container {
            height: 180px; /* ç¨å¾®ç¼©å°é«˜åº¦ä»¥é€‚é…ä¸‹æ‹‰èœå• */
            overflow: hidden;
            position: relative;
            margin-bottom: 20px;
            mask-image: linear-gradient(to bottom, transparent, black 15%, black 85%, transparent);
            -webkit-mask-image: linear-gradient(to bottom, transparent, black 15%, black 85%, transparent);
        }

        #lyricWrapper {
            transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .lyric-line {
            padding: 12px 10px;
            font-size: 16px;
            line-height: 1.6;
            opacity: 0.2;
            transition: all 0.6s ease;
        }

        .lyric-line.active {
            opacity: 1;
            font-size: 19px;
            font-weight: bold;
            color: var(--accent-color);
            text-shadow: 0 0 10px var(--glow-color);
        }

        .controls { display: flex; flex-direction: column; align-items: center; gap: 15px; }

        button {
            padding: 12px 45px;
            border: none;
            border-radius: 50px;
            background: rgba(255,255,255,0.9);
            color: #222;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }

        button:active { transform: scale(0.95); }

        .progress-box { width: 100%; display: flex; align-items: center; gap: 10px; font-size: 12px; }
        .progress-container { flex-grow: 1; background: rgba(255,255,255,0.2); height: 4px; border-radius: 2px; }
        .progress { background: var(--primary-color); height: 100%; width: 0%; border-radius: 2px; box-shadow: 0 0 8px white; }

        .heart {
            position: absolute;
            color: var(--accent-color);
            animation: fall linear forwards;
        }

        @keyframes fall {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            100% { transform: translate(-300px, 600px) rotate(360deg); opacity: 0; }
        }
    </style>
</head>
<body>

<div class="gradient-bg"></div>
<div class="image-bg"></div>
<div id="heart-container"></div>

<div class="player-card">
    <div class="lyric-container" id="lyricView">
        <div id="lyricWrapper"></div>
    </div>
    
    <div class="controls">
        <div class="progress-box">
            <span id="currTime">00:00</span>
            <div class="progress-container" id="progressContainer">
                <div class="progress" id="progress"></div>
            </div>
            <span id="totalTime">00:00</span>
        </div>
        <button id="playPause">æ’­æ”¾ ğŸµ</button>
    </div>

    <div class="playlist-container">
        <select id="songSelect">
            <option value="love.MP3" data-lrc="true">ğŸµ å¼‚æ­¥åŒé¢‘</option>
            <option value="æ™´å¤©ï¼Œå’Œä¸‹é›¨æ—¶å€™.mp3" data-lrc="false">â˜ï¸ æ™´å¤©ï¼Œå’Œä¸‹é›¨æ—¶å€™</option>
            <option value="æ™´å¤©ï¼Œå’Œä¸‹é›¨æ—¶å€™2.mp3" data-lrc="false">â˜ï¸ æ™´å¤©ï¼Œå’Œä¸‹é›¨æ—¶å€™ 2</option>
            <option value="æ™´å¤©ï¼Œå’Œä¸‹é›¨æ—¶å€™3.mp3" data-lrc="false">â˜ï¸ æ™´å¤©ï¼Œå’Œä¸‹é›¨æ—¶å€™ 3</option>
            <option value="æ™´å¤©ï¼Œå’Œä¸‹é›¨æ—¶å€™4.mp3" data-lrc="false">â˜ï¸ æ™´å¤©ï¼Œå’Œä¸‹é›¨æ—¶å€™ 4</option>
        </select>
    </div>
</div>

<audio id="audio" src="love.MP3"></audio>

<script>
    const lrcData = `[00:00.00]å¼‚æ­¥åŒé¢‘(For baby)
[00:10.50]ä¸‡åƒä¿¡æ¯çš„æ´ªæµå¶ç„¶æ±‡èšæˆæ¶Ÿæ¼ª
[00:15.50]èµ›åšçš„æ˜Ÿæµ·è§è¯æŸç§å¿—è¶£çš„å¼€å¯
[00:20.57]é€»è¾‘çš„è’åŸæ›¾ä»¥å­¤ç¯æ„ç­‘ç†æƒ³çš„é˜¶æ¢¯
[00:26.50]ç”³åŸæ ¡å›­æ°å¥½ç¿»å¼€é”¦ç‘Ÿåå¹´çš„ä¼ç¬”
[00:31.44]æµ·å²¸ä¾§ç•”æ›¾å‘å’¸æ¹¿çš„æ½®æ±å»¶ä¼¸
[00:34.71]å›å£°è„‰ç»œè®°å–æŸç§å®¿å‘½çš„å‡æ¸©
[00:37.39]ç¦»å²¸ç»å¹´æ²‰æººå­¤å¯‚çš„ä¸€è¡Œå­¤ç 
[00:40.20]é½é²å¤§åœ°é€†å…‰ç››æ”¾çš„é‚£ä¸ªç››å¤
[00:43.32]å‘œ~å‘œ~å‘œ~(åˆ°è¾¾)
[00:53.50]å—åŒ—å¾€æ¥ç»ˆåœ¨æ­¤æ—¶åŒé¢‘å‘¼å¸
[00:58.09]å‘œ~å‘œ~å‘œ~(åˆ°è¾¾)
[00:58.07]è¿œæ–¹æ™¨æ›¦æ‚„æ‚„æ±‡å…¥ç”³åŸè¡—å··
[01:02.92]æ­¤åˆ»æ€€æŠ±æ›¿ä»£å…­è½½é‚£äº›é¥æœ›
[01:08.06]å®šä¹‰å¾€åä½™ç”Ÿæ¯ä¸€å¯¸æ™¨å…‰
[01:12.70]è¿™æ˜¯çº¦å®šç¼”ç»“åç¬¬ä¸€ä¸ªæµªæ¼«å­£èŠ‚
[01:14.89]åœ¨ç¹åçš„ä¾§å½±é‡Œå¬å²æœˆæ…¢æ…¢é‡å 
[01:17.00]å…­è½½å¯’æš‘æ¯ä¸€å¸§éƒ½æ˜¯æƒŠé¸¿ä¸€ç¥
[01:19.50]æˆ‘ä»¬åœ¨æ¼«é•¿çš„é’æ˜¥é‡Œäº¤æ¢å”¯ä¸€çš„è¯—ç¯‡
[01:33.01]å…«æœˆè‰é¸£é¢„å‘Šå¦ä¸€æ®µè¿œè¡Œä¸è¿å¾™
[01:35.90]æ¸¯å²›çƒŸæ³¢é¥å¯„æ‹“å®½è®¤çŸ¥çš„ç»çº¬
[01:37.79]æ˜”æ—¥ç»ˆç‚¹è§è¯è·¨è¶Šæµ·å²¸è·ç¦»çš„è¿½å¯»
[01:40.68]å½“ä¸‹å¹•åç¨³å›ºå¦ä¸€åœºæ„æ°”é£å‘çš„ä¼ å¥‡
[01:43.37]æ—¶ä»£æµªæ½®æ•²å‡»ç°å®åšç¡¬çš„åŸºçŸ³
[01:46.04]çŸ¥è¯†æ®¿å ‚é‡‡é›†æœªæ¥æœ¦èƒ§çš„æ™¨æ›¦
[01:48.54]ä¸å†éš”ç€å±å¹•çŒœå½¼æ­¤çµé­‚çš„è™šå®
[01:52.28]è€Œæ˜¯æ¯ä¸€ä¸ªå‘¼å¸éƒ½èƒ½è§¦åŠçš„çœŸå®
[01:57.28]Yeah
[01:58.00]æ›¾æœ‰æ¢é“è¸Œèº‡æ—¶é‚£äº›åªæœ‰ä½ æ‡‚çš„æœŸè®¸
[02:01.29]ä¹Ÿæœ‰æŒ‘ç¯å¤‡è€ƒæ—¶éš”ç€å±å¹•ä¸€èµ·çš„å¥‹åŠ›
[02:03.23]ä¸¤åƒå…¬é‡Œçš„æ™šå®‰ç»ˆäºè½åœ¨å½¼æ­¤çš„è€³é™…
[02:07.40]é‚£äº›æ²¡èƒ½æ‹¥æŠ±çš„ç¬é—´éƒ½åœ¨æ­¤åˆ»é‡æ–°å‡èš
[02:12.56]Yeah
[02:13.15]å¹¶éç®—æ³•ç®—å‡†äº†è°ä¼šä¸ºè°åœç•™
[02:14.21]æ‰€æœ‰å¯»è§…ç»ˆåœ¨ä½ çš„æŒ‡å°–è®¤é¢†äº†å½’å®¿
[02:20.37]å…­è½½ç¢æ­¥çš„è·‹æ¶‰ç»ˆåœ¨å§“åé‡Œè§£ç”²
[02:22.96]ç§¯æ”’äº†å…­å¹´çš„çœ·æ‹æ­¢äºæ­¤æ—¶çš„ä¾è´´
[02:25.55]æ„æ°”é£å‘å»æ¢ç´¢é‚£ä¸ªæ›´å¹¿é˜”çš„ä¸–ç•Œ
[02:28.86]æˆ‘å§‹ç»ˆåœ¨è¿™é‡Œå®ˆæŠ¤å±äºä½ çš„æ¯ä¸€å¤„æ˜ç­
[02:31.96]å‘œ~å‘œ~å‘œ~(å†æ¬¡åˆ°è¾¾)
[02:42.53]å—åŒ—å¾€æ¥ç»ˆåœ¨æ­¤æ—¶åŒé¢‘å‘¼å¸
[02:45.65]å‘œ~å‘œ~å‘œ~(å†æ¬¡åˆ°è¾¾)
[02:47.59]è¿œæ–¹æ™¨æ›¦æ‚„æ‚„æ±‡å…¥ç”³åŸè¡—å··
[02:50.40]æ­¤åˆ»æ€€æŠ±æ›¿ä»£å…­è½½é‚£äº›é¥æœ›
[02:55.61]å®šä¹‰å¾€åä½™ç”Ÿæ¯ä¸€å¯¸æ™¨å…‰
[03:03.08]æ›¾æœ‰æ¢é“è¸Œèº‡æ—¶é‚£äº›åªæœ‰ä½ æ‡‚çš„æœŸè®¸
[03:07.96]ä¹Ÿæœ‰æŒ‘ç¯å¤‡è€ƒæ—¶éš”ç€å±å¹•ä¸€èµ·çš„å¥‹åŠ›
[03:11.26]ä¸¤åƒå…¬é‡Œçš„æ™šå®‰ç»ˆäºè½åœ¨å½¼æ­¤çš„è€³é™…
[03:13.09]é‚£äº›æ²¡èƒ½æ‹¥æŠ±çš„ç¬é—´éƒ½åœ¨æ­¤åˆ»é‡æ–°å‡èš
[03:17.96]å¹¶éç®—æ³•ç®—å‡†äº†è°ä¼šä¸ºè°åœç•™
[03:20.90]æ‰€æœ‰å¯»è§…ç»ˆåœ¨ä½ çš„æŒ‡å°–è®¤é¢†äº†å½’å®¿`;

    const audio = document.getElementById("audio");
    const lyricWrapper = document.getElementById("lyricWrapper");
    const heartContainer = document.getElementById("heart-container");
    const playPauseBtn = document.getElementById("playPause");
    const progress = document.getElementById("progress");
    const songSelect = document.getElementById("songSelect");

    let lyrics = [];
    let lyricLines = [];
    let currentIndex = -1;

    // è§£ææ­Œè¯
    function parseLyrics() {
        lyrics = [];
        lrcData.split('\n').forEach(line => {
            const match = line.match(/\[(\d+):(\d+(?:\.\d+)?)\]/);
            if (match) {
                lyrics.push({
                    time: parseInt(match[1]) * 60 + parseFloat(match[2]),
                    text: line.replace(/\[.*\]/, '').trim()
                });
            }
        });
    }

    // æ¸²æŸ“æ­Œè¯ç•Œé¢
    function renderLyrics(hasLrc) {
        lyricWrapper.innerHTML = "";
        lyricLines = [];
        currentIndex = -1;
        lyricWrapper.style.transform = `translateY(0)`;

        if (hasLrc) {
            lyrics.forEach(item => {
                const div = document.createElement("div");
                div.className = "lyric-line";
                div.innerText = item.text;
                lyricWrapper.appendChild(div);
                lyricLines.push(div);
            });
        } else {
            const div = document.createElement("div");
            div.className = "lyric-line active";
            div.style.marginTop = "60px";
            div.innerText = "âœ¨ çº¯éŸ³ä¹æ¬£èµ âœ¨";
            lyricWrapper.appendChild(div);
        }
    }

    parseLyrics();
    renderLyrics(true);

    // ä¸‹æ‹‰èœå•åˆ‡æ¢æ­Œæ›²é€»è¾‘
    songSelect.addEventListener("change", function() {
        const selectedOption = this.options[this.selectedIndex];
        const src = this.value;
        const hasLrc = selectedOption.getAttribute("data-lrc") === "true";

        audio.src = src;
        renderLyrics(hasLrc);
        audio.play();
        playPauseBtn.innerText = "æš‚åœ â¸ï¸";
        toggleHearts(true);
    });

    // æ’­æ”¾æ§åˆ¶ä¸çˆ±å¿ƒæµæ˜Ÿ (åŸæœ‰é€»è¾‘)
    function createHeart() {
        const heart = document.createElement("div");
        heart.className = "heart";
        heart.innerText = "â¤";
        heart.style.left = Math.random() * 120 + "%";
        heart.style.top = "-5%";
        heart.style.fontSize = Math.random() * 15 + 10 + "px";
        heart.style.animationDuration = Math.random() * 3 + 4 + "s";
        heartContainer.appendChild(heart);
        setTimeout(() => heart.remove(), 7000);
    }

    let heartTimer;
    function toggleHearts(playing) {
        clearInterval(heartTimer);
        if(playing) heartTimer = setInterval(createHeart, 400);
    }

    playPauseBtn.addEventListener("click", () => {
        if (audio.paused) {
            audio.play();
            playPauseBtn.innerText = "æš‚åœ â¸ï¸";
            toggleHearts(true);
        } else {
            audio.pause();
            playPauseBtn.innerText = "æ’­æ”¾ ğŸµ";
            toggleHearts(false);
        }
    });

    audio.addEventListener("timeupdate", () => {
        const cur = audio.currentTime;
        document.getElementById("currTime").innerText = formatTime(cur);
        if (audio.duration) {
            document.getElementById("totalTime").innerText = formatTime(audio.duration);
            progress.style.width = (cur / audio.duration * 100) + "%";
        }

        const currentHasLrc = songSelect.options[songSelect.selectedIndex].getAttribute("data-lrc") === "true";
        if (currentHasLrc) {
            let nIndex = lyrics.findIndex((l, i) => cur >= l.time && (!lyrics[i+1] || cur < lyrics[i+1].time));
            if (nIndex !== -1 && nIndex !== currentIndex) {
                if (currentIndex !== -1 && lyricLines[currentIndex]) lyricLines[currentIndex].classList.remove("active");
                currentIndex = nIndex;
                const activeLine = lyricLines[currentIndex];
                if(activeLine) {
                    activeLine.classList.add("active");
                    const offset = activeLine.offsetTop - 80 + activeLine.offsetHeight / 2;
                    lyricWrapper.style.transform = `translateY(${-offset}px)`;
                }
            }
        }
    });

    function formatTime(s) {
        return Math.floor(s/60).toString().padStart(2,'0') + ":" + Math.floor(s%60).toString().padStart(2,'0');
    }

    document.getElementById("progressContainer").addEventListener("click", (e) => {
        audio.currentTime = (e.offsetX / e.currentTarget.clientWidth) * audio.duration;
    });
</script>
</body>
</html>
